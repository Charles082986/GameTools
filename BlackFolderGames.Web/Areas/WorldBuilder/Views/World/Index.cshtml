@{
    ViewData["Title"] = "World Builder";
}

<div class="col-md-12" style="margin-top:10px;">
    <div class="form-inline col-md-12">
        <div class="form-group col-md-4">
            <div class="col-md-12">
                <span class="glyphicon glyphicon-search"></span>
                <input type="text" id="search" class="form-control" style="width:90%" placeholder="Search" />
            </div>
        </div>
        <div class="col-md-2 col-md-offset-1"><h4 style="font-weight:bold">OR</h4></div>
        <div class="form-group col-md-4">
            <a class="btn btn-primary col-md-12" href="/WorldBuilder/World/Create">Create Region Set</a>
        </div>
    </div>
</div>


<ul class="nav nav-tabs card-header-tabs" id="regionSetTabs" role="tablist" style="margin-top:100px;">
    <li class="nav-item active">
        <a class="navbar-link" id="owned-tab" data-toggle="tab" role="tab" href="#owned">My Region Sets (<span id="owned-count">0</span>)</a>
    </li>
    <li class="nav-item">
        <a class="navbar-link" id="shared-tab" data-toggle="tab" role="tab" href="#shared">Shared Region Sets (<span id="shared-count">0</span>)</a>
    </li>
    <li class="nav-item">
        <a class="navbar-link" id="browse-tab" data-toggle="tab" role="tab" href="#browse">Browse Region Sets (<span id="browse-count">0</span>)</a>
    </li>
</ul>
<div class="tab-content col-md-12 clearfix" id="regionsetTabsContent">
    <div class="tab-pane fade active in" id="owned" role="tabpanel"></div>
    <div class="tab-pane fade" id="shared" role="tabpanel"></div>
    <div class="tab-pane fade" id="browse" role="tabpanel"></div>
</div>


@section Scripts {
    <script type="text/javascript" src="/js/BootstrapCardBuilder.js"></script>
    <script type="text/javascript" src="/js/WoldBuilderTabLoader.js"></script>
    <script>
        let searchTimer = null;
        let previousSearchTerm = '';
        let searchCards = (event) => {
            let searchTerm = $(event.target).val();
            if (searchTerm !== previousSearchTerm) {
                previousSearchTerm = searchTerm;
                clearTimeout(searchTimer);
                searchTimer = setTimeout(fetchRegionSetData, 1000, searchTerm);
            }
        }
        $('#search').on('keypress',searchCards);
        fetchRegionSetData();
    </script>
}
